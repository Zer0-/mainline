-- Initial Mainline.cabal generated by cabal init.  For further 
-- documentation, see http://haskell.org/cabal/users-guide/

name:                Mainline
version:             0.1.0.0
-- synopsis:            
-- description:         
license:             OtherLicense
license-file:        LICENSE
author:              Philipp Volugine
maintainer:          phil.volguine@gmail.com
-- copyright:           
category:            Web
build-type:          Simple
-- extra-source-files:  
cabal-version:       >=1.10

test-suite Main
  type:            exitcode-stdio-1.0
  x-uses-tf:       true
  build-depends:   
                   base >= 4.7 && < 5,
                   bencoding >= 0.4.0.0,
                   bytestring,
                   hashable,
                   containers,
                   text,
                   time,
                   cpu,
                   parsec,
                   network-transport,
                   HUnit >= 1.2 && < 2,
                   QuickCheck >= 2.4,
                   test-framework >= 0.4.1,
                   test-framework-quickcheck2,
                   test-framework-hunit
  other-modules:
                   Network.KRPC
                   Network.KRPC.Types
                   Network.KRPC.Helpers
                   Network.KRPC.InternalConstants
                   Network.Octets
                   Mainline.Bucket
                   Mainline.RoutingTable
                   Data.BinaryTrie
                   TestBinaryTrie
  ghc-options:     -Wall -rtsopts
  hs-source-dirs:  src, tests
  default-language: Haskell2010
  main-is:         Main.hs

executable Mainline
  build-depends:   
                   base >= 4.7 && < 5,
                   bencoding >= 0.4.0.0,
                   bytestring,
                   containers,
                   crypto-api,
                   DRBG,
                   cpu,
                   generics-sop >= 0.3.2.0 && < 0.5.0.0,
                   squeal-postgresql,
                   parsec,
                   network,
                   random,
                   text,
                   time,
                   hashable,
                   array,
                   stm,
                   lrucache,
                   cereal,
                   hex,
                   data-default,
                   bittorrent,
                   safe-exceptions,
                   unagi-chan,
                   aeson
  other-modules:
                   Architecture.Cmd
                   Architecture.Internal.Cmd
                   Architecture.Internal.Sub
                   Architecture.Internal.Types
                   Architecture.Internal.Network
                   Architecture.Sub
                   Architecture.TEA
                   Mainline.Bucket
                   Mainline.Mainline
                   Mainline.ResolveMagnet
                   Mainline.RoutingTable
                   Mainline.SQL
                   Mainline.Prepopulate
                   Mainline.App
                   Mainline.Config
                   Network.KRPC
                   Network.KRPC.Helpers
                   Network.KRPC.InternalConstants
                   Network.KRPC.Types
                   Network.Octets
  hs-source-dirs:  src
  ghc-options:     -Wall -rtsopts -threaded -O2 -fllvm -dynamic
  -- -prof -fprof-auto
  default-language: Haskell2010
  main-is:         Mainline/ConcurrentApp.hs

executable SendUDPHello
  build-depends:
                   base >= 4.7 && < 5,
                   bencoding >= 0.4.0.0,
                   containers,
                   text,
                   crypto-api,
                   DRBG,
                   cpu,
                   generics-sop >= 0.3.2.0 && < 0.5.0.0,
                   squeal-postgresql,
                   parsec,
                   network,
                   hashable,
                   time,
                   random,
                   stm,
                   bytestring,
                   safe-exceptions,
                   unagi-chan
  other-modules:
                   Architecture.Cmd
                   Architecture.Sub
                   Architecture.TEA
                   Architecture.Internal.Cmd
                   Architecture.Internal.Sub
                   Architecture.Internal.Types
                   Architecture.Internal.Network
                   Network.KRPC.Helpers
                   Network.KRPC.Types
                   Network.Octets
  hs-source-dirs:   src
  ghc-options:      -Wall -rtsopts -O2 -threaded -fllvm -dynamic
  default-language: Haskell2010
  main-is:          Mainline/Scripts/SendUDPHello.hs

executable Teatime
  build-depends:
                   base >= 4.7 && < 5,
                   bencoding >= 0.4.0.0,
                   text,
                   time,
                   crypto-api,
                   DRBG,
                   cpu,
                   generics-sop >= 0.3.2.0 && < 0.5.0.0,
                   squeal-postgresql,
                   parsec,
                   containers,
                   network,
                   bytestring,
                   random,
                   stm,
                   hashable,
                   safe-exceptions,
                   unagi-chan
  other-modules:
                   Architecture.Cmd
                   Architecture.Internal.Cmd
                   Architecture.Internal.Sub
                   Architecture.Internal.Types
                   Architecture.Internal.Network
                   Architecture.Sub
                   Architecture.TEA
                   Network.Octets
                   Network.KRPC.Types
                   Network.KRPC.Helpers
  hs-source-dirs:   src
  ghc-options:      -Wall -rtsopts -O2 -threaded -fllvm -dynamic
  default-language: Haskell2010
  main-is:          Architecture/Hello.hs

benchmark Mainline-benchmark
  default-language: Haskell2010
  hs-source-dirs:   bench src
  main-is:          Benchmark.hs
  type:             exitcode-stdio-1.0
  build-depends:
                   base >= 4.7 && < 5,
                   criterion,
                   bytestring,
                   DRBG,
                   crypto-api,
                   containers
  other-modules:
                   Data.BinaryTrie
  ghc-options:     -Wall -rtsopts -O2 -fllvm -prof -fprof-auto
